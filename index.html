<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drawing Canvas</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
        font-family: 'Poppins', sans-serif;
      }

      #canvasContainer {
        background: white;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      canvas {
        border: 2px solid #333;
        border-radius: 8px;
        background-color: white;
        touch-action: none;
      }

      .toolbar {
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 15px;
      }

      .toolbar button {
        background-color: #4f46e5;
        color: white;
        border: none;
        padding: 10px 20px;
        font-weight: 600;
        border-radius: 6px;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .toolbar button:hover {
        background-color: #3730a3;
      }
    </style>
  </head>
  <body>
    <div id="canvasContainer">
      <canvas id="drawingCanvas" width="600" height="400"></canvas>
      <div class="toolbar">
        <button id="pencil" title="Draw with pencil">Pencil</button>
        <button id="eraser" title="Erase drawings">Eraser</button>
        <button id="reset" title="Clear the canvas">Reset</button>
        <button id="save" title="Save drawing as JPEG">Save as JPEG</button>
      </div>
    </div>

    <script>
      const canvas = document.getElementById("drawingCanvas");
      const ctx = canvas.getContext("2d");
      const pencilBtn = document.getElementById("pencil");
      const eraserBtn = document.getElementById("eraser");
      const resetBtn = document.getElementById("reset");
      const saveBtn = document.getElementById("save");

      // Initial white background
      ctx.fillStyle = "white";
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      let drawing = false;
      let erasing = false;

      const getXY = (e) => {
        const rect = canvas.getBoundingClientRect();
        return {
          x: (e.clientX || e.touches[0].clientX) - rect.left,
          y: (e.clientY || e.touches[0].clientY) - rect.top,
        };
      };

      const startDrawing = (e) => {
        drawing = true;
        const { x, y } = getXY(e);
        ctx.beginPath();
        ctx.moveTo(x, y);
      };

      const draw = (e) => {
        if (!drawing) return;
        const { x, y } = getXY(e);
        ctx.lineTo(x, y);
        ctx.strokeStyle = erasing ? "#f0f0f0" : "#000";
        ctx.lineWidth = erasing ? 20 : 2;
        ctx.lineCap = "round";
        ctx.stroke();
      };

      const stopDrawing = () => {
        drawing = false;
        ctx.closePath();
      };

      // Mouse events
      canvas.addEventListener("mousedown", startDrawing);
      canvas.addEventListener("mousemove", draw);
      canvas.addEventListener("mouseup", stopDrawing);
      canvas.addEventListener("mouseout", stopDrawing);

      // Touch events
      canvas.addEventListener("touchstart", (e) => {
        e.preventDefault();
        startDrawing(e);
      });

      canvas.addEventListener("touchmove", (e) => {
        e.preventDefault();
        draw(e);
      });

      canvas.addEventListener("touchend", (e) => {
        e.preventDefault();
        stopDrawing();
      });

      // Tool actions
      pencilBtn.addEventListener("click", () => (erasing = false));
      eraserBtn.addEventListener("click", () => (erasing = true));

      resetBtn.addEventListener("click", () => {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
      });

      saveBtn.addEventListener("click", () => {
        const tempCanvas = document.createElement("canvas");
        tempCanvas.width = canvas.width;
        tempCanvas.height = canvas.height;
        const tempCtx = tempCanvas.getContext("2d");
        tempCtx.fillStyle = "white";
        tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
        tempCtx.drawImage(canvas, 0, 0);
        const link = document.createElement("a");
        link.download = "drawing.jpeg";
        link.href = tempCanvas.toDataURL("image/jpeg");
        link.click();
      });
    </script>
  </body>
</html>
